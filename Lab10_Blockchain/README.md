# JBlockchain - Distributed Blockchain Project Assignment

## Assignment Steps

### 1. Download the JBlockchain Project

First, the original JBlockchain project should be downloaded from GitHub:
```bash
git clone https://github.com/neozo-software/jblockchain.git
```

### 2. Add Custom Property Registry Files

After cloning the repository, place the following custom files in the same directory as the cloned JBlockchain repository:
- `run_registry.bat`
- `run_viewer.bat`
- `compile.bat`
- `PropertyRegistry.java`
- `PropertyViewer.java`

These files are custom implementations created for this assignment and are necessary for the property registry functionality. The `.class` files will be generated by the `compile.bat` script.

### 3. Compile the Project with Maven

The project should be compiled using Maven:
```bash
# For Windows
.\mvnw.cmd package

# For Linux/macOS
./mvnw package
```

This command will compile three core modules:
- **common**: Shared classes and data structures
- **node**: Blockchain node application
- **client**: Client application for blockchain interaction

### 4. Start the Root Node

The root node of the blockchain network should be started as follows:
```bash
java -jar node/target/node-0.0.1-SNAPSHOT.jar
```

### 5. Create a Key Pair

A key pair must be created to perform transactions on the blockchain:
```bash
java -jar client/target/client-0.0.1-SNAPSHOT.jar --keypair
```

This command will create the `key.priv` and `key.pub` files.

### 6. Create an Address

An address should be created with a username:
```bash
java -jar client/target/client-0.0.1-SNAPSHOT.jar --address --node "http://localhost:8080" --name "Your Name" --publickey key.pub
```

The created address can be verified by visiting this URL in a browser:
```
http://localhost:8080/address
```

### 7. Send a Transaction

A message can be sent to the blockchain as follows:
```bash
java -jar client/target/client-0.0.1-SNAPSHOT.jar --transaction --node "http://localhost:8080" --sender "YOUR_ADDRESS_HASH" --message "Hello World" --privatekey key.priv
```

The sent transaction can be checked at this address:
```
http://localhost:8080/transaction
```

### 8. Start and Stop Mining

Mining can be started to add transactions to blocks as follows:
```bash
curl http://localhost:8080/block/start-miner
```

Mining can be stopped as follows:
```bash
curl http://localhost:8080/block/stop-miner
```

The created blocks can be checked at this address:
```
http://localhost:8080/block
```

### 9. Start Additional Nodes

Two additional nodes can be started on different ports as follows:
```bash
java -jar node/target/node-0.0.1-SNAPSHOT.jar "--server.port=8081"
java -jar node/target/node-0.0.1-SNAPSHOT.jar "--server.port=8082"
```

### 10. Run the Property Registry System

The custom property registration and viewing applications developed for this project are:

1. **PropertyRegistry.java** - Property registration application
2. **PropertyViewer.java** - Property viewing application

#### Compile the Custom Applications

First, compile the custom applications using the provided batch file:
```bash
.\compile.bat
```

#### Running the Property Registration Application

The property registration application can be run in PowerShell as follows:
```bash
.\run_registry.bat
```

With this application:
- New properties can be registered
- Property ownership can be transferred to other users

#### Running the Property Viewing Application

The property viewing application can be run in PowerShell as follows:
```bash
.\run_viewer.bat
```

With this application:
- All property records can be viewed
- Details of a specific property can be seen
- The ownership history of a property can be tracked

## Data Structure

Property information is stored on the blockchain as formatted messages as follows:
- `REGISTER_PROPERTY|{propertyId}|{description}` - For new property registration
- `TRANSFER_PROPERTY|{propertyId}|{newOwnerHash}` - For property transfer

## Example Usage Flow

1. Clone the JBlockchain repository
2. Add the custom files (`run_registry.bat`, `run_viewer.bat`, `compile.bat`, `PropertyRegistry.java`, `PropertyViewer.java`) to the same directory
3. Compile the JBlockchain project using Maven
4. Start the root node
5. Create a key pair and address
6. Compile the custom Java files using `compile.bat`
7. Run the PropertyRegistry application using `run_registry.bat` in PowerShell
8. Create a property record using your address hash and private key
9. **Make sure to start mining** to include the record in the blockchain (`curl http://localhost:8080/block/start-miner`). Without this step, transactions will not appear in blocks.
10. Run the PropertyViewer application using `run_viewer.bat` in PowerShell to view the records
